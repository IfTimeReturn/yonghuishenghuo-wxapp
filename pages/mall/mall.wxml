<!--pages/mall/mall.wxml-->

<view class="container">
  <!-- 头部定位和搜索 -->
  <view class="mall-heard">
    <view class="heard-left">
      <image src="../../images/address_1.png" class="image"></image>
      {{address}}</view>
    <view class="heard-right">
      <input value='{{search}}' placeholder='请输入商品名称'></input>
      <icon type="search" color="#616161" size="14" class="search-icon" />
    </view>
  </view>
  <!-- 商家box -->
  <view class="seller-box">
    <view class="seller">
      <view class="seller-icon">
        <image src="{{current_seller.icon}}"></image>
      </view>
      <view class="seller-select" bindtap='openSeller'>{{seller.length}}个商家可选
        <image src="../../images/arrow_r.png" class="arrow" style="transform: rotate({{open_seller_list ? -90 : 90}}deg);"></image>
      </view>
    </view>
    <view class="seller-list" style="{{open_seller_list ? 'bottom: -' + (70 * seller.length) + 'px' : 'bottom: 0rpx'}}">
      <view class="seller-item" wx:for="{{seller}}" wx:key="{{index}}" bindtap='selectSeller' data-item="{{item}}" data-idx="{{ seller.length}}">
        <view class="seller-icon">
          <image src="{{item.icon}}"></image>
        </view>
        <view class="seller-info">
          <view class="seller-name">{{item.name}}</view>
          <text class="seller-text">距您{{item.address}}米，支持{{item.min}}分钟达</text>
        </view>
        <view class="selected" wx:if="{{item.id === current_seller.id}}">
          <icon type="success_no_circle" color="#EE7942"></icon>
        </view>
      </view>
    </view>
  </view>
  <!-- 商品内容 -->
  <view class="goods-content">
    <scroll-view scroll-y="true" class="breed-box">
      <view class="breed-item {{current_breed.id === item.id ? 'actived' : ''}}" wx:for="{{current_breed_list}}" wx:key="{{index}}" bindtap='chooseBreed' data-item="{{item}}">{{item.name}}
        <view class="new_tab" wx:if="{{item.new && current_breed.id !== item.id}}">
          <text>新</text>
        </view>
      </view>
    </scroll-view>
    <scroll-view scroll-y class="goods-box">
    <view wx:for="{{goods}}" wx:key="{{index}}">
    <goods-item goods="{{item}}" size="small"></goods-item>
    </view>
      
    </scroll-view>
    <view class="mask" wx:if="{{open_seller_list}}"></view>
  </view>
</view>